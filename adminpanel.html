<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD-ft</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 250px;
            background-color: #1a1a2e;
            color: white;
            padding: 20px 0;
        }

        .logo {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid #333;
            margin-bottom: 20px;
        }

        .logo h2 {
            color: #4CAF50;
        }

        .nav-links {
            list-style: none;
        }

        .nav-links li {
            padding: 15px 25px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .nav-links li:hover, .nav-links li.active {
            background-color: #16213e;
            border-left: 4px solid #4CAF50;
        }

        .nav-links li i {
            margin-right: 10px;
        }

        .main-content {
            flex: 1;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }

        .header h1 {
            color: #1a1a2e;
        }

        .user-info {
            display: flex;
            align-items: center;
        }

        .user-info img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .content-section {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .section-title {
            margin-bottom: 20px;
            color: #1a1a2e;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        .btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }

        .btn:hover {
            background-color: #45a049;
        }

        .btn-secondary {
            background-color: #6c757d;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table th, table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }

        table tr:hover {
            background-color: #f5f5f5;
        }

        .actions button {
            padding: 5px 10px;
            margin-right: 5px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        .edit-btn {
            background-color: #ffc107;
            color: #212529;
        }

        .delete-btn {
            background-color: #dc3545;
            color: white;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: #4CAF50;
            color: white;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1001;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 500px;
            max-width: 90%;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-modal {
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .close-modal:hover {
            color: #333;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Боковая панель -->
        <div class="sidebar">
            <div class="logo">
                <h2>football-teams</h2>
            </div>
            <ul class="nav-links">
                <li class="active" data-target="dashboard">Dashboard</li>
                <li data-target="teams">Teams</li>
                <li data-target="players">Players</li>
                <li data-target="coaches">Coaches</li>
                <li data-target="matches">Matches</li>
            </ul>
        </div>

        <!-- Основной контент -->
        <div class="main-content">
            <div class="header">
                <h1>Футбольные команды</h1>
                <div class="user-info">
                    <img src="https://via.placeholder.com/40" alt="Администратор">
                    <span>Администратор</span>
    <form>
        <button onclick="go_to_auth()"><a href="index.php">Авторизация</a></button>
        <button class="submit"></button>
    </form>
                </div>
            </div>

            <!-- Дашборд -->
            <div id="dashboard" class="content-section active">
                <h2 class="section-title">Дашборд</h2>
                <div class="stats">
                    <div style="display: flex; gap: 20px; margin-bottom: 30px;">
                        <div style="flex: 1; background: #e3f2fd; padding: 20px; border-radius: 8px; text-align: center;">
                            <h3>Команды</h3>
                            <p style="font-size: 24px; font-weight: bold; margin-top: 10px;" id="teams-count">0</p>
                        </div>
                        <div style="flex: 1; background: #e8f5e9; padding: 20px; border-radius: 8px; text-align: center;">
                            <h3>Игроки</h3>
                            <p style="font-size: 24px; font-weight: bold; margin-top: 10px;" id="players-count">0</p>
                        </div>
                        <div style="flex: 1; background: #fff3e0; padding: 20px; border-radius: 8px; text-align: center;">
                            <h3>Тренеры</h3>
                            <p style="font-size: 24px; font-weight: bold; margin-top: 10px;" id="coaches-count">0</p>
                        </div>
                    </div>
                </div>
                <div>
                    <h3>Последние добавленные команды</h3>
                    <table id="recent-teams">
                        <thead>
                            <tr>
                                <th>Название</th>
                                <th>Город</th>
                                <th>Год основания</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Данные будут заполнены через JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Команды -->
            <div id="teams" class="content-section">
                <div class="section-title">
                    <h2>Управление командами</h2>
                    <button class="btn" id="add-team-btn">Добавить команду</button>
                </div>
                <div class="search-box">
                    <input type="text" id="search-team" placeholder="Поиск команды...">
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Название</th>
                            <th>Город</th>
                            <th>Год основания</th>
                            <th>Стадион</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody id="teams-table-body">
                        <!-- Данные будут заполнены через JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Игроки -->
            <div id="players" class="content-section">
                <div class="section-title">
                    <h2>Управление игроками</h2>
                    <button class="btn" id="add-player-btn">Добавить игрока</button>
                </div>
                <div class="search-box">
                    <input type="text" id="search-player" placeholder="Поиск игрока...">
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Имя</th>
                            <th>Фамилия</th>
                            <th>Возраст</th>
                            <th>Позиция</th>
                            <th>Команда</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody id="players-table-body">
                        <!-- Данные будут заполнены через JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Тренеры -->
            <div id="coaches" class="content-section">
                <div class="section-title">
                    <h2>Управление тренерами</h2>
                    <button class="btn" id="add-coach-btn">Добавить тренера</button>
                </div>
                <div class="search-box">
                    <input type="text" id="search-coach" placeholder="Поиск тренера...">
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Имя</th>
                            <th>Фамилия</th>
                            <th>Возраст</th>
                            <th>Лицензия</th>
                            <th>Команда</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody id="coaches-table-body">
                        <!-- Данные будут заполнены через JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Матчи -->
            <div id="matches" class="content-section">
                <h2 class="section-title">Управление матчами</h2>
                <p>Здесь будет управление матчами и расписанием.</p>
            </div>
        </div>
    </div>

    <!-- Модальное окно для добавления/редактирования команды -->
    <div id="team-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="team-modal-title">Добавить команду</h3>
                <span class="close-modal">&times;</span>
            </div>
            <form id="team-form">
                <input type="hidden" id="team-id">
                <div class="form-group">
                    <label for="team-name">Название команды</label>
                    <input type="text" id="team-name" required>
                </div>
                <div class="form-group">
                    <label for="team-city">Город</label>
                    <input type="text" id="team-city" required>
                </div>
                <div class="form-group">
                    <label for="team-founded">Год основания</label>
                    <input type="number" id="team-founded" min="1800" max="2023" required>
                </div>
                <div class="form-group">
                    <label for="team-stadium">Стадион</label>
                    <input type="text" id="team-stadium" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-team">Отмена</button>
                    <button type="submit" class="btn">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно для добавления/редактирования игрока -->
    <div id="player-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="player-modal-title">Добавить игрока</h3>
                <span class="close-modal">&times;</span>
            </div>
            <form id="player-form">
                <input type="hidden" id="player-id">
                <div class="form-group">
                    <label for="player-firstname">Имя</label>
                    <input type="text" id="player-firstname" required>
                </div>
                <div class="form-group">
                    <label for="player-lastname">Фамилия</label>
                    <input type="text" id="player-lastname" required>
                </div>
                <div class="form-group">
                    <label for="player-age">Возраст</label>
                    <input type="number" id="player-age" min="16" max="45" required>
                </div>
                <div class="form-group">
                    <label for="player-position">Позиция</label>
                    <select id="player-position" required>
                        <option value="">Выберите позицию</option>
                        <option value="Вратарь">Вратарь</option>
                        <option value="Защитник">Защитник</option>
                        <option value="Полузащитник">Полузащитник</option>
                        <option value="Нападающий">Нападающий</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="player-team">Команда</label>
                    <select id="player-team" required>
                        <option value="">Выберите команду</option>
                        <!-- Опции будут заполнены через JavaScript -->
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-player">Отмена</button>
                    <button type="submit" class="btn">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно для добавления/редактирования тренера -->
    <div id="coach-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="coach-modal-title">Добавить тренера</h3>
                <span class="close-modal">&times;</span>
            </div>
            <form id="coach-form">
                <input type="hidden" id="coach-id">
                <div class="form-group">
                    <label for="coach-firstname">Имя</label>
                    <input type="text" id="coach-firstname" required>
                </div>
                <div class="form-group">
                    <label for="coach-lastname">Фамилия</label>
                    <input type="text" id="coach-lastname" required>
                </div>
                <div class="form-group">
                    <label for="coach-age">Возраст</label>
                    <input type="number" id="coach-age" min="25" max="80" required>
                </div>
                <div class="form-group">
                    <label for="coach-license">Лицензия</label>
                    <select id="coach-license" required>
                        <option value="">Выберите лицензию</option>
                        <option value="UEFA Pro">UEFA Pro</option>
                        <option value="UEFA A">UEFA A</option>
                        <option value="UEFA B">UEFA B</option>
                        <option value="UEFA C">UEFA C</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="coach-team">Команда</label>
                    <select id="coach-team" required>
                        <option value="">Выберите команду</option>
                        <!-- Опции будут заполнены через JavaScript -->
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-coach">Отмена</button>
                    <button type="submit" class="btn">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Уведомление -->
    <div class="notification" id="notification"></div>

    <script>
        // Данные для примера
        let teams = JSON.parse(localStorage.getItem('teams')) || [
            { id: 1, name: "Спартак", city: "Москва", founded: 1922, stadium: "Открытие Арена" },
            { id: 2, name: "Зенит", city: "Санкт-Петербург", founded: 1925, stadium: "Газпром Арена" },
            { id: 3, name: "ЦСКА", city: "Москва", founded: 1911, stadium: "ВЭБ Арена" }
        ];

        let players = JSON.parse(localStorage.getItem('players')) || [
            { id: 1, firstName: "Александр", lastName: "Соболев", age: 26, position: "Нападающий", teamId: 1 },
            { id: 2, firstName: "Артем", lastName: "Дзюба", age: 34, position: "Нападающий", teamId: 2 },
            { id: 3, firstName: "Федор", lastName: "Чалов", age: 26, position: "Нападающий", teamId: 3 }
        ];

        let coaches = JSON.parse(localStorage.getItem('coaches')) || [
            { id: 1, firstName: "Гильермо", lastName: "Абаскаль", age: 46, license: "UEFA Pro", teamId: 1 },
            { id: 2, firstName: "Сергей", lastName: "Семак", age: 47, license: "UEFA Pro", teamId: 2 },
            { id: 3, firstName: "Владимир", lastName: "Федотов", age: 56, license: "UEFA Pro", teamId: 3 }
        ];

        // Сохранение данных в localStorage
        function saveData() {
            localStorage.setItem('teams', JSON.stringify(teams));
            localStorage.setItem('players', JSON.stringify(players));
            localStorage.setItem('coaches', JSON.stringify(coaches));
            updateDashboard();
        }

        // Обновление дашборда
        function updateDashboard() {
            document.getElementById('teams-count').textContent = teams.length;
            document.getElementById('players-count').textContent = players.length;
            document.getElementById('coaches-count').textContent = coaches.length;
            
            const recentTeamsTable = document.getElementById('recent-teams').getElementsByTagName('tbody')[0];
            recentTeamsTable.innerHTML = '';
            
            // Показываем последние 3 команды
            const recentTeams = teams.slice(-3);
            recentTeams.forEach(team => {
                const row = recentTeamsTable.insertRow();
                row.insertCell(0).textContent = team.name;
                row.insertCell(1).textContent = team.city;
                row.insertCell(2).textContent = team.founded;
            });
        }

        // Показать уведомление
        function showNotification(message, isSuccess = true) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.backgroundColor = isSuccess ? '#4CAF50' : '#f44336';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Навигация по вкладкам
        function setupNavigation() {
            document.querySelectorAll('.nav-links li').forEach(item => {
                item.addEventListener('click', function() {
                    // Убираем активный класс у всех вкладок
                    document.querySelectorAll('.nav-links li').forEach(li => {
                        li.classList.remove('active');
                    });
                    
                    // Добавляем активный класс к текущей вкладке
                    this.classList.add('active');
                    
                    // Скрываем все разделы контента
                    document.querySelectorAll('.content-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    
                    // Показываем выбранный раздел
                    const targetId = this.getAttribute('data-target');
                    document.getElementById(targetId).classList.add('active');
                    
                    // Обновляем таблицы при переходе на вкладку
                    if (targetId === 'teams') {
                        renderTeamsTable();
                    } else if (targetId === 'players') {
                        renderPlayersTable();
                        populateTeamSelect('player-team');
                    } else if (targetId === 'coaches') {
                        renderCoachesTable();
                        populateTeamSelect('coach-team');
                    }
                });
            });
        }

        // Рендеринг таблицы команд
        function renderTeamsTable() {
            const tableBody = document.getElementById('teams-table-body');
            tableBody.innerHTML = '';
            
            teams.forEach(team => {
                const row = tableBody.insertRow();
                row.insertCell(0).textContent = team.name;
                row.insertCell(1).textContent = team.city;
                row.insertCell(2).textContent = team.founded;
                row.insertCell(3).textContent = team.stadium;
                
                const actionsCell = row.insertCell(4);
                actionsCell.className = 'actions';
                
                const editButton = document.createElement('button');
                editButton.className = 'edit-btn';
                editButton.textContent = 'Редактировать';
                editButton.addEventListener('click', () => openTeamModal(team));
                
                const deleteButton = document.createElement('button');
                deleteButton.className = 'delete-btn';
                deleteButton.textContent = 'Удалить';
                deleteButton.addEventListener('click', () => deleteTeam(team.id));
                
                actionsCell.appendChild(editButton);
                actionsCell.appendChild(deleteButton);
            });
        }

        // Рендеринг таблицы игроков
        function renderPlayersTable() {
            const tableBody = document.getElementById('players-table-body');
            tableBody.innerHTML = '';
            
            players.forEach(player => {
                const team = teams.find(t => t.id === player.teamId);
                const teamName = team ? team.name : 'Не назначена';
                
                const row = tableBody.insertRow();
                row.insertCell(0).textContent = player.firstName;
                row.insertCell(1).textContent = player.lastName;
                row.insertCell(2).textContent = player.age;
                row.insertCell(3).textContent = player.position;
                row.insertCell(4).textContent = teamName;
                
                const actionsCell = row.insertCell(5);
                actionsCell.className = 'actions';
                
                const editButton = document.createElement('button');
                editButton.className = 'edit-btn';
                editButton.textContent = 'Редактировать';
                editButton.addEventListener('click', () => openPlayerModal(player));
                
                const deleteButton = document.createElement('button');
                deleteButton.className = 'delete-btn';
                deleteButton.textContent = 'Удалить';
                deleteButton.addEventListener('click', () => deletePlayer(player.id));
                
                actionsCell.appendChild(editButton);
                actionsCell.appendChild(deleteButton);
            });
        }

        // Рендеринг таблицы тренеров
        function renderCoachesTable() {
            const tableBody = document.getElementById('coaches-table-body');
            tableBody.innerHTML = '';
            
            coaches.forEach(coach => {
                const team = teams.find(t => t.id === coach.teamId);
                const teamName = team ? team.name : 'Не назначена';
                
                const row = tableBody.insertRow();
                row.insertCell(0).textContent = coach.firstName;
                row.insertCell(1).textContent = coach.lastName;
                row.insertCell(2).textContent = coach.age;
                row.insertCell(3).textContent = coach.license;
                row.insertCell(4).textContent = teamName;
                
                const actionsCell = row.insertCell(5);
                actionsCell.className = 'actions';
                
                const editButton = document.createElement('button');
                editButton.className = 'edit-btn';
                editButton.textContent = 'Редактировать';
                editButton.addEventListener('click', () => openCoachModal(coach));
                
                const deleteButton = document.createElement('button');
                deleteButton.className = 'delete-btn';
                deleteButton.textContent = 'Удалить';
                deleteButton.addEventListener('click', () => deleteCoach(coach.id));
                
                actionsCell.appendChild(editButton);
                actionsCell.appendChild(deleteButton);
            });
        }

        // Заполнение выпадающего списка командами
        function populateTeamSelect(selectId) {
            const select = document.getElementById(selectId);
            select.innerHTML = '<option value="">Выберите команду</option>';
            
            teams.forEach(team => {
                const option = document.createElement('option');
                option.value = team.id;
                option.textContent = team.name;
                select.appendChild(option);
            });
        }

        // Открытие модального окна для команды
        function openTeamModal(team = null) {
            const modal = document.getElementById('team-modal');
            const title = document.getElementById('team-modal-title');
            const form = document.getElementById('team-form');
            
            if (team) {
                title.textContent = 'Редактировать команду';
                document.getElementById('team-id').value = team.id;
                document.getElementById('team-name').value = team.name;
                document.getElementById('team-city').value = team.city;
                document.getElementById('team-founded').value = team.founded;
                document.getElementById('team-stadium').value = team.stadium;
            } else {
                title.textContent = 'Добавить команду';
                form.reset();
                document.getElementById('team-id').value = '';
            }
            
            modal.style.display = 'flex';
        }

        // Открытие модального окна для игрока
        function openPlayerModal(player = null) {
            const modal = document.getElementById('player-modal');
            const title = document.getElementById('player-modal-title');
            const form = document.getElementById('player-form');
            
            populateTeamSelect('player-team');
            
            if (player) {
                title.textContent = 'Редактировать игрока';
                document.getElementById('player-id').value = player.id;
                document.getElementById('player-firstname').value = player.firstName;
                document.getElementById('player-lastname').value = player.lastName;
                document.getElementById('player-age').value = player.age;
                document.getElementById('player-position').value = player.position;
                document.getElementById('player-team').value = player.teamId;
            } else {
                title.textContent = 'Добавить игрока';
                form.reset();
                document.getElementById('player-id').value = '';
            }
            
            modal.style.display = 'flex';
        }

        // Открытие модального окна для тренера
        function openCoachModal(coach = null) {
            const modal = document.getElementById('coach-modal');
            const title = document.getElementById('coach-modal-title');
            const form = document.getElementById('coach-form');
            
            populateTeamSelect('coach-team');
            
            if (coach) {
                title.textContent = 'Редактировать тренера';
                document.getElementById('coach-id').value = coach.id;
                document.getElementById('coach-firstname').value = coach.firstName;
                document.getElementById('coach-lastname').value = coach.lastName;
                document.getElementById('coach-age').value = coach.age;
                document.getElementById('coach-license').value = coach.license;
                document.getElementById('coach-team').value = coach.teamId;
            } else {
                title.textContent = 'Добавить тренера';
                form.reset();
                document.getElementById('coach-id').value = '';
            }
            
            modal.style.display = 'flex';
        }

        // Настройка модальных окон
        function setupModals() {
            // Закрытие модальных окон
            document.querySelectorAll('.close-modal, .btn-secondary').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.modal').forEach(modal => {
                        modal.style.display = 'none';
                    });
                });
            });

            // Обработка формы команды
            document.getElementById('team-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const id = document.getElementById('team-id').value;
                const name = document.getElementById('team-name').value;
                const city = document.getElementById('team-city').value;
                const founded = document.getElementById('team-founded').value;
                const stadium = document.getElementById('team-stadium').value;
                
                if (id) {
                    // Редактирование существующей команды
                    const index = teams.findIndex(t => t.id == id);
                    teams[index] = { id: parseInt(id), name, city, founded: parseInt(founded), stadium };
                    showNotification('Команда успешно обновлена');
                } else {
                    // Добавление новой команды
                    const newId = teams.length > 0 ? Math.max(...teams.map(t => t.id)) + 1 : 1;
                    teams.push({ id: newId, name, city, founded: parseInt(founded), stadium });
                    showNotification('Команда успешно добавлена');
                }
                
                saveData();
                renderTeamsTable();
                document.getElementById('team-modal').style.display = 'none';
            });

            // Обработка формы игрока
            document.getElementById('player-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const id = document.getElementById('player-id').value;
                const firstName = document.getElementById('player-firstname').value;
                const lastName = document.getElementById('player-lastname').value;
                const age = document.getElementById('player-age').value;
                const position = document.getElementById('player-position').value;
                const teamId = document.getElementById('player-team').value;
                
                if (id) {
                    // Редактирование существующего игрока
                    const index = players.findIndex(p => p.id == id);
                    players[index] = { 
                        id: parseInt(id), 
                        firstName, 
                        lastName, 
                        age: parseInt(age), 
                        position, 
                        teamId: parseInt(teamId) 
                    };
                    showNotification('Игрок успешно обновлен');
                } else {
                    // Добавление нового игрока
                    const newId = players.length > 0 ? Math.max(...players.map(p => p.id)) + 1 : 1;
                    players.push({ 
                        id: newId, 
                        firstName, 
                        lastName, 
                        age: parseInt(age), 
                        position, 
                        teamId: parseInt(teamId) 
                    });
                    showNotification('Игрок успешно добавлен');
                }
                
                saveData();
                renderPlayersTable();
                document.getElementById('player-modal').style.display = 'none';
            });

            // Обработка формы тренера
            document.getElementById('coach-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const id = document.getElementById('coach-id').value;
                const firstName = document.getElementById('coach-firstname').value;
                const lastName = document.getElementById('coach-lastname').value;
                const age = document.getElementById('coach-age').value;
                const license = document.getElementById('coach-license').value;
                const teamId = document.getElementById('coach-team').value;
                
                if (id) {
                    // Редактирование существующего тренера
                    const index = coaches.findIndex(c => c.id == id);
                    coaches[index] = { 
                        id: parseInt(id), 
                        firstName, 
                        lastName, 
                        age: parseInt(age), 
                        license, 
                        teamId: parseInt(teamId) 
                    };
                    showNotification('Тренер успешно обновлен');
                } else {
                    // Добавление нового тренера
                    const newId = coaches.length > 0 ? Math.max(...coaches.map(c => c.id)) + 1 : 1;
                    coaches.push({ 
                        id: newId, 
                        firstName, 
                        lastName, 
                        age: parseInt(age), 
                        license, 
                        teamId: parseInt(teamId) 
                    });
                    showNotification('Тренер успешно добавлен');
                }
                
                saveData();
                renderCoachesTable();
                document.getElementById('coach-modal').style.display = 'none';
            });
        }

        // Удаление команды
        function deleteTeam(id) {
            if (confirm('Вы уверены, что хотите удалить эту команду?')) {
                // Проверяем, есть ли связанные игроки или тренеры
                const hasPlayers = players.some(p => p.teamId === id);
                const hasCoaches = coaches.some(c => c.teamId === id);
                
                if (hasPlayers || hasCoaches) {
                    showNotification('Нельзя удалить команду, у которой есть игроки или тренеры', false);
                    return;
                }
                
                teams = teams.filter(t => t.id !== id);
                saveData();
                renderTeamsTable();
                showNotification('Команда успешно удалена');
            }
        }

        // Удаление игрока
        function deletePlayer(id) {
            if (confirm('Вы уверены, что хотите удалить этого игрока?')) {
                players = players.filter(p => p.id !== id);
                saveData();
                renderPlayersTable();
                showNotification('Игрок успешно удален');
            }
        }

        // Удаление тренера
        function deleteCoach(id) {
            if (confirm('Вы уверены, что хотите удалить этого тренера?')) {
                coaches = coaches.filter(c => c.id !== id);
                saveData();
                renderCoachesTable();
                showNotification('Тренер успешно удален');
            }
        }

        // Настройка кнопок добавления
        function setupAddButtons() {
            // Добавление обработчиков для кнопок добавления
            document.getElementById('add-team-btn').addEventListener('click', () => openTeamModal());
            document.getElementById('add-player-btn').addEventListener('click', () => openPlayerModal());
            document.getElementById('add-coach-btn').addEventListener('click', () => openCoachModal());
        }

        // Настройка поиска
        function setupSearch() {
            document.getElementById('search-team').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const filteredTeams = teams.filter(team => 
                    team.name.toLowerCase().includes(searchTerm) || 
                    team.city.toLowerCase().includes(searchTerm)
                );
                
                const tableBody = document.getElementById('teams-table-body');
                tableBody.innerHTML = '';
                
                filteredTeams.forEach(team => {
                    const row = tableBody.insertRow();
                    row.insertCell(0).textContent = team.name;
                    row.insertCell(1).textContent = team.city;
                    row.insertCell(2).textContent = team.founded;
                    row.insertCell(3).textContent = team.stadium;
                    
                    const actionsCell = row.insertCell(4);
                    actionsCell.className = 'actions';
                    
                    const editButton = document.createElement('button');
                    editButton.className = 'edit-btn';
                    editButton.textContent = 'Редактировать';
                    editButton.addEventListener('click', () => openTeamModal(team));
                    
                    const deleteButton = document.createElement('button');
                    deleteButton.className = 'delete-btn';
                    deleteButton.textContent = 'Удалить';
                    deleteButton.addEventListener('click', () => deleteTeam(team.id));
                    
                    actionsCell.appendChild(editButton);
                    actionsCell.appendChild(deleteButton);
                });
            });
        }

        // Инициализация
        function init() {
            updateDashboard();
            renderTeamsTable();
            renderPlayersTable();
            renderCoachesTable();
            
            setupNavigation();
            setupModals();
            setupAddButtons();
            setupSearch();
        }

        // Запуск при полной загрузке DOM
        document.addEventListener('DOMContentLoaded', init);
        
        // Перенаправление
        function go_to_auth(){
            window.location.href = "https://feamoria.ru/fedorov.m.a/index.html";
        }
    </script>
</body>
</html>